#!/usr/bin/env python

Import('env')

from platform_methods import run_in_subprocess
import platform_linuxbsd_builders

common_unix = [
    "context_gl_x11.cpp",
    "crash_handler_linuxbsd.cpp",
    "detect_prime.cpp",
    "joypad_linux.cpp",
    "key_mapping_x11.cpp",
    "os_linuxbsd.cpp",
    "power_linuxbsd.cpp",
]

prog = env.add_program('#bin/godot', ['godot_linuxbsd.cpp'] + common_unix)

if (env["debug_symbols"] == "full" or env["debug_symbols"] == "yes") and env["separate_debug_symbols"]:
    env.AddPostAction(prog, run_in_subprocess(
        platform_linuxbsd_builders.make_debug_linuxbsd))
